**道的层面**

(1).分布式系统源码阅读方式

(2).分布式消息系统的架构设计原理(高并发,高可用,高性能)

**术的层面**

(1).kafka客户端发送消息的核心流程

(2).kafka客户端内存池的架构设计

(3).kafka客户端的容错设计

(4).kafka支持超高并发的网络架构设计

(5).kafka高性能,高并发,高可用的架构设计原理

(6).kafka副本同步机制原理

(7).kafka元数据核心管理流程

**kafka的六大场景**

Client:

​	生产者发送数据的流程

    1.ProducerInterceptors 是一个拦截器，对我们发送的数据进行拦截。
    
    2.Serializer 对消息的key和value进行序列化
    
    3.为消息选择合适的分区
    
    4.RecordAccummulator收集消息，实现批量发送
    
    （注：这是生产者比较重要的一个功能，到时候我们会详细分析这个功能）
    
    5.sender 从RecordAccummulator获取消息
    
    6.构造ClientRequest
    
    7.将ClientRequest 交给NetworkClient准备发送
    
    8.NetWorkClient讲请求放入KafkaChannel的缓存
    
    9.发送请求
    
    10.收到响应，调用回调函数
    
    11.调用recordBatch的回调函数。最终调用每个消息的回调函数

​	消费者消费数据的流程

Server:

​	kafka的网络架构是如何设计

​	kafka的数据是如何存储

​	kafka的副本是如何同步的

​	kafka的元数据信息是如何管理

===========================

场景驱动的方式: 一般开发环境使用异步方式,同步方式可以在测试某项功能的时候使用

​	生产者是如何发送数据的,分为2个步骤分析

​	1.研究清楚Producer初始化流程?
        1.看到初始化了一堆参数
        2.初始化了几个核心的对象 封装消息/缓存消息/发送消息
        3.看了元数据的大致结构,元数据中的节点集群/节点/分区信息

​	2.producer.send(xxx)发送数据的流程
        1.获取元数据
        2.在等待元数据的时候,开启另一个线程,这个线程通过网络操作去获取元数据,主线程休眠等待
        3.当元数据获取到了,就会唤醒主线程,主线程有了元数据,就会继续发送消息
        
生产者的一些其他问题:    
1.接收到响应之后,响应消息的流转流程
2.客户端是如何处理响应消息
3.生产者发送消息之后,内存是如何处理的
4.如果响应带有异常,那么客户端如何处理
5.如果发送消息不及时,发生超时现象如何处理
6.消息已经发送出去了,但是长时间没有接收到响应,该如何处理
